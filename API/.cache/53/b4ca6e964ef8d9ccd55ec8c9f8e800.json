{"id":"favorites.js","dependencies":[{"name":"/Users/hozan/Desktop/devstree/nawikurdi/API/package.json","includedInParent":true,"mtime":1590877042665},{"name":"superagent","loc":{"line":1,"column":23},"parent":"/Users/hozan/Desktop/devstree/nawikurdi/API/public/js/favorites.js","resolved":"/Users/hozan/Desktop/devstree/nawikurdi/API/node_modules/superagent/lib/client.js"},{"name":"jquery","loc":{"line":2,"column":14},"parent":"/Users/hozan/Desktop/devstree/nawikurdi/API/public/js/favorites.js","resolved":"/Users/hozan/Desktop/devstree/nawikurdi/API/node_modules/jquery/dist/jquery.js"},{"name":"notyf","loc":{"line":3,"column":22},"parent":"/Users/hozan/Desktop/devstree/nawikurdi/API/public/js/favorites.js","resolved":"/Users/hozan/Desktop/devstree/nawikurdi/API/node_modules/notyf/notyf.es.js"}],"generated":{"js":"\"use strict\";\n\nvar _superagent = _interopRequireDefault(require(\"superagent\"));\n\nvar _jquery = _interopRequireDefault(require(\"jquery\"));\n\nvar _notyf = require(\"notyf\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Create an instance of Notyf\nvar notyf = new _notyf.Notyf(); // scroll logic\n\nvar mybutton = document.getElementById(\"to-top\");\n\nwindow.onscroll = function () {\n  scrollFunction();\n};\n\nfunction scrollFunction() {\n  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {\n    mybutton.style.display = \"block\";\n  } else {\n    mybutton.style.display = \"none\";\n  }\n}\n\nfunction topFunction() {\n  document.body.scrollTop = 0; // For Safari\n\n  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera\n}\n\nfunction vote(data) {\n  var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n  return _superagent.default.post(\"/api/vote\").send(data).end(function (err, res) {\n    cb(err, res);\n  });\n}\n\nfunction getCookie(cname) {\n  var name = cname + \"=\";\n  var decodedCookie = decodeURIComponent(document.cookie);\n  var ca = decodedCookie.split(';');\n\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n\n    while (c.charAt(0) == ' ') {\n      c = c.substring(1);\n    }\n\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n\n  return \"\";\n}\n\nfunction showNotFound() {\n  (0, _jquery.default)('.names-container').prepend(\"\\n        <div class=\\\"col col-md col-sm  notfound-container\\\">\\n            <img src=\\\"/images/child.webp\\\"/>\\n            <p>\\u0686\\u0647\\u200C\\u0646\\u062F \\u0646\\u0627\\u0648\\u06CE\\u0643 \\u0647\\u0647\\u200C\\u06B5\\u0628\\u0698\\u06CE\\u0631\\u0647\\u200C \\u0628\\u06C6 \\u0626\\u0647\\u200C\\u0648\\u0647\\u200C\\u06CC \\u0644\\u06CE\\u0631\\u0647\\u200C \\u062F\\u0647\\u200C\\u0631\\u0628\\u0686\\u06CE\\u062A</p>\\n        </div>\\n    \");\n}\n\nfunction hideNotFound() {\n  (0, _jquery.default)('.notfound-container').remove();\n}\n\nmodule.exports = {\n  init: function init() {\n    window.topFunction = topFunction;\n    var favs = localStorage.getItem('favs');\n\n    try {\n      var found = false;\n      favs = JSON.parse(favs);\n\n      for (var key in favs) {\n        if (favs.hasOwnProperty(key)) {\n          var val = favs[key];\n          (0, _jquery.default)('.names-container').append(val);\n          found = true;\n        }\n      }\n\n      if (!found) showNotFound();\n    } catch (e) {\n      console.log(e);\n    }\n\n    (0, _jquery.default)(document).delegate('.up-vote', 'click', function () {\n      var btn = this;\n      vote({\n        name_id: (0, _jquery.default)(this).data('id'),\n        uid: getCookie('uid'),\n        impact: 'positive'\n      }, function (err, res) {\n        if (err) {\n          var errors = err.response.body.errors;\n          notyf.error(errors[0].msg);\n        } else {\n          (0, _jquery.default)(btn).html(\"<i class=\\\"fas fa-check\\\"></i> \\u0646\\u06CE\\u0631\\u062F\\u0631\\u0627\");\n        }\n      });\n    });\n    (0, _jquery.default)(document).delegate('.down-vote', 'click', function () {\n      var btn = this;\n      vote({\n        name_id: (0, _jquery.default)(this).data('id'),\n        uid: getCookie('uid'),\n        impact: 'negative'\n      }, function (err, res) {\n        if (err) {\n          var errors = err.response.body.errors;\n          notyf.error(errors[0].msg);\n        } else {\n          (0, _jquery.default)(btn).html(\"<i class=\\\"fas fa-check\\\"></i> \\u0646\\u06CE\\u0631\\u062F\\u0631\\u0627\");\n        }\n      });\n    });\n    (0, _jquery.default)(document).delegate('.remove-fav', 'click', function () {\n      var favs = localStorage.getItem('favs');\n      var fav_ids = localStorage.getItem('fav_ids');\n      var id = (0, _jquery.default)(this).data('id');\n\n      if (favs) {\n        favs = JSON.parse(favs);\n        delete favs[id];\n        localStorage.setItem('favs', JSON.stringify(favs));\n      }\n\n      if (fav_ids) {\n        fav_ids = fav_ids.split(',');\n        var index = fav_ids.indexOf(id + \"\");\n\n        if (index > -1) {\n          fav_ids.splice(index, 1);\n        }\n\n        if (!fav_ids.length == 0) showNotFound();\n        localStorage.setItem('fav_ids', fav_ids.join(','));\n      }\n\n      (0, _jquery.default)(this).parents('.card-container').remove();\n    });\n  }\n};"},"sourceMaps":null,"error":null,"hash":"f6f3ea9b7514835b1da4279d3f2390d4","cacheData":{"env":{}}}