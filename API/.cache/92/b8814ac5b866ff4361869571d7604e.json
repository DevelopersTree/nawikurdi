{"id":"index.js","dependencies":[{"name":"/Users/hozan/Desktop/devstree/nawikurdi/API/package.json","includedInParent":true,"mtime":1590845434402},{"name":"./general","loc":{"line":1,"column":23},"parent":"/Users/hozan/Desktop/devstree/nawikurdi/API/public/js/index.js","resolved":"/Users/hozan/Desktop/devstree/nawikurdi/API/public/js/general.js"},{"name":"superagent","loc":{"line":2,"column":23},"parent":"/Users/hozan/Desktop/devstree/nawikurdi/API/public/js/index.js","resolved":"/Users/hozan/Desktop/devstree/nawikurdi/API/node_modules/superagent/lib/client.js"},{"name":"slugify","loc":{"line":3,"column":20},"parent":"/Users/hozan/Desktop/devstree/nawikurdi/API/public/js/index.js","resolved":"/Users/hozan/Desktop/devstree/nawikurdi/API/node_modules/slugify/slugify.js"},{"name":"jquery","loc":{"line":4,"column":14},"parent":"/Users/hozan/Desktop/devstree/nawikurdi/API/public/js/index.js","resolved":"/Users/hozan/Desktop/devstree/nawikurdi/API/node_modules/jquery/dist/jquery.js"}],"generated":{"js":"\"use strict\";\n\nvar _general = require(\"./general\");\n\nvar _superagent = _interopRequireDefault(require(\"superagent\"));\n\nvar _slugify = _interopRequireDefault(require(\"slugify\"));\n\nvar _jquery = _interopRequireDefault(require(\"jquery\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// scroll logic\nvar mybutton = document.getElementById(\"to-top\");\n\nwindow.onscroll = function () {\n  scrollFunction();\n};\n\nfunction scrollFunction() {\n  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {\n    mybutton.style.display = \"block\";\n  } else {\n    mybutton.style.display = \"none\";\n  }\n}\n\nfunction topFunction() {\n  document.body.scrollTop = 0; // For Safari\n\n  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera\n} // end of scroll logic\n\n\nvar params = {\n  limit: 10,\n  offset: 0\n};\n\nfunction load(params) {\n  return _superagent.default.get(\"/api\").query(params).then(function (data) {\n    return data.body.names;\n  }).catch(function (err) {\n    return [];\n  });\n}\n\nfunction display(container, data) {\n  var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'append';\n  // mode will be one of overwrite, append, prepend\n  var alterMethod = 'html';\n\n  if (mode === 'append') {\n    alterMethod = 'append';\n  } else if (mode == 'prepend') {\n    alterMethod = 'prepend';\n  } // if(data.length < params.limit ){\n  //     $('.btn-showmore').fadeOut(300);\n  //     hideLoader();\n  // }else {\n  //     $('.btn-showmore').fadeIn(300);\n  //     showLoader();\n  // }\n\n\n  var html = \"\";\n  data.map(function (record) {\n    var gender = 'هاوبه‌ش';\n    if (record.gender == 'M' || record.gender == 'm') gender = 'كور';else if (record.gender == 'F' || record.gender == 'F') gender = 'كچ';\n    html += \"\\n            <a  class=\\\"col col-3 col-md col-sm card-container\\\">\\n                <div class=\\\"card\\\">\\n                    <h3 class=\\\"card-title\\\">\".concat(record.name, \" ( \").concat(gender, \" ) </h3>\\n                    <p class=\\\"card-body\\\">\\n                        \").concat(record.desc, \"\\n                    \\u200C</p>\\n                    <div class=\\\"card-footer\\\">\\n                        <div class=\\\"btn-group _3btn\\\">\\n                            <button><i class=\\\"far fa-thumbs-down\\\"></i> ( \").concat(record.negative_votes, \" )</button>\\n                            <button><i class=\\\"far fa-thumbs-up\\\"></i>   ( \").concat(record.positive_votes, \" ) </button>\\n                            <button><i class=\\\"far fa-heart\\\"></i>  </button>\\n                        </div>\\n                    </div>\\n                </div>\\n            </a>\\n        \");\n    return null;\n  });\n  (0, _jquery.default)(container)[alterMethod](html);\n  return html;\n}\n\nfunction showLoader() {\n  (0, _jquery.default)('.names-container').append(\"\\n        <a class=\\\"col col-3 col-md col-sm loader\\\" >\\n            <h3 class=\\\"txt-center\\\"><i class=\\\"fas fa-spinner fa-spin\\\"></i></h3>\\n        </a> \\n    \");\n}\n\nfunction hideLoader() {\n  (0, _jquery.default)('.loader').remove();\n}\n\nmodule.exports = {\n  init: function init() {\n    window.topFunction = topFunction;\n    (0, _jquery.default)(window).scroll(function () {\n      var triggerMargin = 100;\n\n      if ((0, _jquery.default)(window).scrollTop() >= (0, _jquery.default)(document).height() - (0, _jquery.default)(window).height() - triggerMargin) {\n        var page = (0, _jquery.default)('body').data('page') || 1;\n        var calculatedOffset = params.limit * page;\n        params.offset = calculatedOffset;\n        (0, _jquery.default)('body').data('page', ++page);\n        showLoader();\n        load(params).then(function (data) {\n          hideLoader();\n          display('.names-container', data, 'append');\n        });\n      }\n    });\n    (0, _jquery.default)('.input-filter').keyup((0, _general.debounce)(function () {\n      (0, _jquery.default)('body').data('page', 1);\n      params.offset = 0;\n      var val = (0, _jquery.default)(this).val();\n      if (val.trim() != '') params.q = val;else delete params.q;\n      showLoader();\n      load(params).then(function (data) {\n        hideLoader();\n        display('.names-container', data, 'overwrite');\n      });\n    }, 300));\n    (0, _jquery.default)('.gender-filter').click(function () {\n      (0, _jquery.default)('body').data('page', 1);\n      params.offset = 0;\n      var val = \"\".concat((0, _jquery.default)(this).data('value'));\n      if (val.trim() != '-1') params.gender = val;else delete params.gender;\n      (0, _jquery.default)(\".gender-filter\").removeClass(\"active\");\n      (0, _jquery.default)(this).addClass(\"active\");\n      showLoader();\n      load(params).then(function (data) {\n        hideLoader();\n        display('.names-container', data, 'overwrite');\n      });\n    });\n    (0, _jquery.default)('.popularity-filter').click(function () {\n      (0, _jquery.default)('body').data('page', 1);\n      params.offset = 0;\n      var val = \"\".concat((0, _jquery.default)(this).data('value'));\n      if (val.trim() != '-1') params.sort = val;else delete params.sort;\n      (0, _jquery.default)(\".popularity-filter\").removeClass(\"active\");\n      (0, _jquery.default)(this).addClass(\"active\");\n      showLoader();\n      load(params).then(function (data) {\n        hideLoader();\n        display('.names-container', data, 'overwrite');\n      });\n    });\n    (0, _jquery.default)('.btn-showmore').click(function () {\n      var page = (0, _jquery.default)(this).data('page') || 1;\n      var calculatedOffset = params.limit * page;\n      params.offset = calculatedOffset;\n      (0, _jquery.default)(this).data('page', ++page);\n      load(params).then(function (data) {\n        display('.names-container', data, 'append');\n      });\n    });\n  }\n};"},"sourceMaps":null,"error":null,"hash":"d7f90df79ad23f96d99858f7c348fd9c","cacheData":{"env":{}}}