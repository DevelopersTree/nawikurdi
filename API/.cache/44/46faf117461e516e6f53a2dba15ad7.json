{"id":"favorites.js","dependencies":[{"name":"/home/aram/Desktop/nawikurdi/API/package.json","includedInParent":true,"mtime":1590908189847},{"name":"superagent","loc":{"line":1,"column":23},"parent":"/home/aram/Desktop/nawikurdi/API/public/js/favorites.js","resolved":"/home/aram/Desktop/nawikurdi/API/node_modules/superagent/lib/client.js"},{"name":"jquery","loc":{"line":2,"column":14},"parent":"/home/aram/Desktop/nawikurdi/API/public/js/favorites.js","resolved":"/home/aram/Desktop/nawikurdi/API/node_modules/jquery/dist/jquery.js"},{"name":"notyf","loc":{"line":3,"column":22},"parent":"/home/aram/Desktop/nawikurdi/API/public/js/favorites.js","resolved":"/home/aram/Desktop/nawikurdi/API/node_modules/notyf/notyf.es.js"}],"generated":{"js":"\"use strict\";\n\nvar _superagent = _interopRequireDefault(require(\"superagent\"));\n\nvar _jquery = _interopRequireDefault(require(\"jquery\"));\n\nvar _notyf = require(\"notyf\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Create an instance of Notyf\nvar notyf = new _notyf.Notyf();\n\nfunction vote(data) {\n  var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n  return _superagent.default.post(\"/api/vote\").send(data).end(function (err, res) {\n    cb(err, res);\n  });\n}\n\nfunction getCookie(cname) {\n  var name = cname + \"=\";\n  var decodedCookie = decodeURIComponent(document.cookie);\n  var ca = decodedCookie.split(';');\n\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n\n    while (c.charAt(0) == ' ') {\n      c = c.substring(1);\n    }\n\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n\n  return \"\";\n}\n\nmodule.exports = {\n  init: function init() {\n    var favs = localStorage.getItem('favs');\n\n    try {\n      favs = JSON.parse(favs);\n\n      for (var key in favs) {\n        if (favs.hasOwnProperty(key)) {\n          var val = favs[key];\n          (0, _jquery.default)('.names-container').append(val);\n        }\n      }\n    } catch (e) {\n      console.log(e);\n    }\n\n    (0, _jquery.default)(document).delegate('.up-vote', 'click', function () {\n      var btn = this;\n      vote({\n        name_id: (0, _jquery.default)(this).data('id'),\n        uid: getCookie('uid'),\n        impact: 'positive'\n      }, function (err, res) {\n        if (err) {\n          var errors = err.response.body.errors;\n          notyf.error(errors[0].msg);\n        } else {\n          (0, _jquery.default)(btn).html(\"<i class=\\\"fas fa-check\\\"></i> \\u0646\\u06CE\\u0631\\u062F\\u0631\\u0627\");\n        }\n      });\n    });\n    (0, _jquery.default)(document).delegate('.down-vote', 'click', function () {\n      var btn = this;\n      vote({\n        name_id: (0, _jquery.default)(this).data('id'),\n        uid: getCookie('uid'),\n        impact: 'negative'\n      }, function (err, res) {\n        if (err) {\n          var errors = err.response.body.errors;\n          notyf.error(errors[0].msg);\n        } else {\n          (0, _jquery.default)(btn).html(\"<i class=\\\"fas fa-check\\\"></i> \\u0646\\u06CE\\u0631\\u062F\\u0631\\u0627\");\n        }\n      });\n    }); // $(document).delegate('.make-fav', 'click', function(){\n    //     let favs = localStorage.getItem('favs');\n    //     const id = $(this).data('id');\n    //     const html  = `<a class=\"col col-3 col-md col-sm card-container\">${$(this).parents('.card-container').html()}</a>` ;\n    //     console.log(html)\n    //     if(favs){\n    //         favs = JSON.parse(favs);\n    //         favs[id] = html;\n    //         localStorage.setItem('favs', JSON.stringify(favs))\n    //     } else {\n    //         const newFavs = {};\n    //         newFavs[id] = html;\n    //         localStorage.setItem('favs', JSON.stringify(newFavs))\n    //     }\n    //     $(this).removeClass('make-fav').addClass('remove-fav').html('<i class=\"fas fa-heart txt-red\"></i>');\n    // });\n    // $(document).delegate('.remove-fav', 'click', function(){\n    //     let favs = localStorage.getItem('favs');\n    //     const id = $(this).data('id');\n    //     if(favs){\n    //         favs = JSON.parse(favs);\n    //         delete favs[id];\n    //         localStorage.setItem('favs', JSON.stringify(favs))\n    //     }\n    //     $(this).removeClass('remove-fav').addClass('make-fav').html('<i class=\"far fa-heart\"></i>');\n    // });\n  }\n};"},"sourceMaps":null,"error":null,"hash":"3d478dc47c481dd38202faad2f74a02c","cacheData":{"env":{}}}